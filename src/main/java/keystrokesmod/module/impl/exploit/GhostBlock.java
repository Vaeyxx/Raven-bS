package keystrokesmod.module.impl.exploit;

import keystrokesmod.event.SendPacketEvent;
import keystrokesmod.module.Module;
import keystrokesmod.utility.Utils;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.jetbrains.annotations.NotNull;

public class GhostBlock extends Module {
    public GhostBlock() {
        super("GhostBlock", category.exploit);
    }

    @Override
    public void onEnable() {
        Utils.sendMessage("Right click a block to create a ghost block");
    }

    @SubscribeEvent
    public void onSendPacket(@NotNull SendPacketEvent event) {
        if (event.getPacket() instanceof C08PacketPlayerBlockPlacement) {
            C08PacketPlayerBlockPlacement packet = (C08PacketPlayerBlockPlacement) event.getPacket();
            if (packet.getPosition() != BlockPos.ORIGIN) {
                event.setCanceled(true);
                mc.theWorld.setBlockToAir(packet.getPosition());
            }
        }
    }
}
